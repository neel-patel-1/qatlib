++ dirname ./dsa_config_test_runner.sh
+ . ./common
++ export SIZE_1=1
++ SIZE_1=1
++ export SIZE_512=512
++ SIZE_512=512
++ export SIZE_1K=1024
++ SIZE_1K=1024
++ export SIZE_4K=4096
++ SIZE_4K=4096
++ export SIZE_64K=65536
++ SIZE_64K=65536
++ export SIZE_1M=1048576
++ SIZE_1M=1048576
++ export SIZE_2M=2097152
++ SIZE_2M=2097152
++ export EXIT_FAILURE=1
++ EXIT_FAILURE=1
++ export EXIT_SKIP=77
++ EXIT_SKIP=77
++ TESTDIR=/usr/libexec/accel-config/test
++ BINDIR=/usr/bin
++ '[' -f ../accfg/accel-config ']'
++ '[' -x ../accfg/accel-config ']'
++ export ACCFG=../accfg/accel-config
++ ACCFG=../accfg/accel-config
++ '[' -f ./dsa_test ']'
++ '[' -x ./dsa_test ']'
++ export DSATEST=./dsa_test
++ DSATEST=./dsa_test
++ '[' -f ./iaa_test ']'
++ '[' -x ./iaa_test ']'
++ export IAATEST=./iaa_test
++ IAATEST=./iaa_test
++ '[' -f ./configs/2g2q_user_1.conf ']'
++ export CONFIG1=./configs/2g2q_user_1.conf
++ CONFIG1=./configs/2g2q_user_1.conf
++ '[' -f ./configs/2g2q_user_2.conf ']'
++ export CONFIG2=./configs/2g2q_user_2.conf
++ CONFIG2=./configs/2g2q_user_2.conf
+ DSA=dsa0
+ WQ0=wq0.0
+ GRP0=group0.0
+ ENG0=engine0.0
+ IDXD_DEVICE_PATH=/sys/bus/dsa/devices
+ '[' '!' -f ./dsa_test ']'
+ check_min_kver 5.6
+ local ver=5.6
++ uname -r
+ : 6.5.7-dirty
+ '[' -n 5.6 ']'
++ echo -e '5.6\n6.5.7-dirty'
++ sort -V
++ head -1
+ [[ 5.6 == \5\.\6 ]]
+ '[' '!' -f /sys/bus/dsa/devices/dsa0/pasid_enabled ']'
++ cat /sys/bus/dsa/devices/dsa0/pasid_enabled
+ pasid_en=1
+ '[' 1 -ne 1 ']'
++ cat /sys/bus/dsa/devices/dsa0/version
+ IDXD_VERSION=0x100
+ _cleanup
+ lsmod
+ grep -wq idxd_vdev
+ lsmod
+ grep -wq idxd_uacce
+ lsmod
+ grep -wq iaa_crypto
+ lsmod
+ grep -wq iax_crypto
+ lsmod
+ grep -wq idxd
+ rmmod idxd
rmmod: ERROR: ../libkmod/libkmod-module.c:799 kmod_module_remove_module() could not remove 'idxd': Operation not permitted
rmmod: ERROR: could not remove module idxd: Operation not permitted
+ lsmod
+ grep -wq vfio_pci
+ sleep 1
+ modprobe idxd
+ sleep 1
+ modprobe vfio_pci
modprobe: ERROR: could not insert 'vfio_pci': Operation not permitted
+ group_config_test
+ local read_ret
+ '[' -f /sys/bus/dsa/devices/dsa0/group0.0/read_buffers_allowed ']'
+ ../accfg/accel-config config-group dsa0/group0.0 -r 37
libaccfg: accfg_group_set_read_buffers_reserved: group0.0: read_buffers_reserved attribute write failed: Permission denied
+ exit 1
FAIL dsa_config_test_runner.sh (exit status: 1)
